#pragma once
#include "Module.h"
#include "p2List.h"
#include "p2Point.h"
#include "Globals.h"

class PhysBody;

class ModuleSceneIntro : public Module
{
public:
	ModuleSceneIntro(Application* app, bool start_enabled = true);
	~ModuleSceneIntro();

	bool Start();
	update_status Update();
	bool CleanUp();
	void OnCollision(PhysBody* bodyA, PhysBody* bodyB);
	void LoadMap();

public:
	p2List<PhysBody*> circles;
	p2List<PhysBody*> boxes;
	p2List<PhysBody*> ricks;
	PhysBody* Pinball;
	PhysBody* Abajo_Derecha;
	PhysBody* Abajo_Izquierda;

	PhysBody* sensor;
	bool sensed;

	SDL_Texture* circle;
	SDL_Texture* box;
	SDL_Texture* rick;
	uint bonus_fx;
	p2Point<int> ray;
	bool ray_on;

	int pinball[338] = {
		0, 798,
		153, 798,
		31, 732,
		17, 721,
		10, 701,
		12, 627,
		13, 615,
		28, 603,
		47, 591,
		47, 547,
		53, 538,
		63, 537,
		71, 541,
		73, 547,
		76, 566,
		85, 567,
		96, 558,
		97, 543,
		86, 542,
		56, 496,
		61, 485,
		11, 400,
		37, 383,
		50, 405,
		80, 390,
		93, 408,
		125, 390,
		100, 343,
		121, 330,
		148, 372,
		162, 373,
		175, 365,
		151, 343,
		136, 312,
		125, 276,
		127, 243,
		136, 220,
		146, 200,
		128, 181,
		146, 158,
		170, 141,
		197, 130,
		222, 123,
		227, 148,
		260, 151,
		291, 160,
		313, 172,
		328, 186,
		343, 208,
		355, 233,
		360, 252,
		366, 257,
		373, 247,
		366, 220,
		351, 188,
		332, 166,
		306, 145,
		278, 136,
		243, 131,
		248, 103,
		287, 107,
		318, 121,
		343, 140,
		370, 165,
		392, 202,
		401, 232,
		403, 258,
		400, 288,
		406, 298,
		410, 291,
		413, 263,
		412, 237,
		402, 207,
		386, 170,
		357, 137,
		333, 118,
		300, 101,
		263, 92,
		223, 91,
		187, 102,
		153, 116,
		141, 93,
		181, 76,
		217, 67,
		255, 67,
		301, 75,
		338, 91,
		368, 112,
		392, 137,
		415, 167,
		430, 206,
		438, 236,
		440, 267,
		436, 295,
		430, 323,
		436, 332,
		440, 322,
		448, 280,
		448, 245,
		442, 215,
		425, 170,
		406, 138,
		387, 116,
		352, 86,
		318, 67,
		277, 57,
		235, 53,
		191, 60,
		152, 71,
		126, 87,
		112, 112,
		102, 146,
		102, 203,
		101, 303,
		31, 345,
		15, 347,
		5, 336,
		5, 140,
		10, 121,
		21, 115,
		61, 91,
		107, 67,
		155, 43,
		215, 28,
		263, 28,
		310, 36,
		367, 62,
		406, 95,
		435, 133,
		463, 185,
		471, 233,
		470, 303,
		463, 333,
		448, 363,
		470, 403,
		471, 465,
		472, 548,
		472, 632,
		472, 727,
		447, 725,
		448, 631,
		448, 526,
		448, 432,
		445, 413,
		435, 401,
		383, 487,
		393, 498,
		381, 517,
		363, 543,
		350, 543,
		348, 553,
		356, 562,
		371, 568,
		375, 561,
		373, 543,
		385, 540,
		395, 540,
		402, 552,
		402, 592,
		426, 606,
		433, 617,
		437, 625,
		437, 696,
		433, 708,
		423, 722,
		295, 800,
		478, 800,
		480, -1,
		1, -1
	};

	int abajo_derecha[34] = {
	99, 631,
	124, 688,
	126, 697,
	124, 702,
	118, 703,
	111, 701,
	80, 684,
	76, 681,
	75, 677,
	75, 672,
	75, 629,
	75, 623,
	78, 619,
	83, 617,
	89, 618,
	91, 620,
	99, 630
	};

	int abajo_izquierda[36] = {
	347, 636,
	321, 691,
	320, 697,
	322, 702,
	327, 703,
	334, 702,
	340, 699,
	367, 682,
	371, 679,
	373, 676,
	374, 669,
	374, 628,
	372, 622,
	369, 618,
	364, 617,
	358, 619,
	355, 622,
	347, 635
	};
};
